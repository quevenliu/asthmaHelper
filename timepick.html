<html data-wf-domain="time-picker-1117bd.webflow.io" data-wf-page="62bd77a9f1e5118ea7a9a4b7" data-wf-site="62bd77a9f1e5112e52a9a4b6" class=" w-mod-js">
<head>
    <style>
        .wf-force-outline-none[tabindex="-1"]:focus {
            outline: none;
        }
    </style>
    <meta charset="utf-8">
    <title>Time Picker</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="Webflow" name="generator">
    <link href="https://uploads-ssl.webflow.com/62bd77a9f1e5112e52a9a4b6/css/time-picker-1117bd.webflow.e354da8d8.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif]-->
    <script type="text/javascript">!function (o, c) { var n = c.documentElement, t = " w-mod-"; n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch") }(window, document);</script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <link href="https://uploads-ssl.webflow.com/img/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="https://uploads-ssl.webflow.com/img/webclip.png" rel="apple-touch-icon">
    <script>
        window.onload = function () {
            liff.init({ liffId: "1657234797-4BJoAWwl" });
        };

        liff.ready.then(() => {
            jQuery(".w-webflow-badge").hide();
            var uid = "";
            var userName = "";
            liff
                .getProfile()
                .then((profile) => {
                    uid = profile.userId;
                    userName = profile.displayName;
                })
                .catch((err) => {
                    alert(err);
                });

            fetch(`https://tmonr01wlf.execute-api.ap-northeast-1.amazonaws.com/getTime/asthmaChatGetTime?uid=${uid}`)
                .then(function (response) {
                    myData = JSON.parse(response);
                    var form = jQuery("email-form");
                    if (myData.Morning == "1") {
                        form.append(inputGen("Morning", myData.timeSetting.Morning.Hour, myData.timeSetting.Morning.Minute));
                    }
                    if (myData.Noon == "1") {
                        form.append(inputGen("Noon", myData.timeSetting.Noon.Hour, myData.timeSetting.Noon.Minute));

                    }
                    if (myData.Night == "1") {
                        form.append(inputGen("Night", myData.timeSetting.Night.Hour, myData.timeSetting.Night.Minute));

                    }
                    if (myData.Sleep == "1") {
                        form.append(inputGen("Sleep", myData.timeSetting.Sleep.Hour, myData.timeSetting.Sleep.Minute));

                    }
                })
                .catch((error) => { alert(error); }
                );

            jQuery(".plus").click(() => {
                jQuery(this).siblings("input").value(String(toSixty(parseInt(jQuery(this).siblings("input").value()) + 15)));
            });
            jQuery(".minus").click(() => {
                jQuery(this).siblings("input").value(String(toSixty(parseInt(jQuery(this).siblings("input").value()) - 15)));
            });




        }).
            catch((error) => {
                alert(error);
            });

        function toSixty(a) {
            if (a < 0) {
                a += 60;
            }
            if (a > 60) {
                a -= 60;
            }
            return a;
        }


        function inputGen(myStr, myHour, myMin) {
            return `<div class="w-row">
                <div class="column-2 w-col w-col-6"><a href="#" class="button w-button minus">-</a><input type="text" id = "${myStr}Hour" class="text-field w-input" maxlength="256" name="field-2" data-name="Field 2" placeholder="Example Text" required="" value = "${myHour}"><a href="#" class="button-2 w-button plus">+</a></div>
                    <div class="column-2 w-col w-col-6"><a href="#" class="button w-button minus">-</a><input type="text" id = "${myStr}Minute" class="text-field w-input" maxlength="256" name="field-2" data-name="Field 2" placeholder="Example Text" required="" value = "${myMin}"><a href="#" class="button-2 w-button plus">+</a></div>
                    </div>`;
        }

    </script>
</head>
<body class="body">
    <div>
        <div class="w-form">
            <form id="email-form" name="email-form" data-name="Email Form" method="get" aria-label="Email Form">
                <div class="w-row">
                    <div class="column-2 w-col w-col-6"><a href="#" class="button w-button minus">-</a><input type="text" class="text-field w-input" maxlength="256" name="field-2" data-name="Field 2" placeholder="Example Text" id="field-2" required=""><a href="#" class="button-2 w-button plus">+</a></div>
                    <div class="column-2 w-col w-col-6"><a href="#" class="button w-button minus">-</a><input type="text" class="text-field w-input" maxlength="256" name="field-2" data-name="Field 2" placeholder="Example Text" id="field-2" required=""><a href="#" class="button-2 w-button plus">+</a></div>
                </div>
                <button class="button w-button"> Confirm </button>
            </form>
        </div>
    </div>
    <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=62bd77a9f1e5112e52a9a4b6" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://uploads-ssl.webflow.com/62bd77a9f1e5112e52a9a4b6/js/webflow.e97bfa43b.js" type="text/javascript"></script><!--[if lte IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif]-->
</body>
</html>
